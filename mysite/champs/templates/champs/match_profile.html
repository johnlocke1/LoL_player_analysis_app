<html>
    <head>
        {% load staticfiles %}
        <link rel="stylesheet" type="text/css" href="{% static 'champs/poobygg.css' %}"/>
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
        <title> {{ name }}'s Match Analysis </title>
    </head>
        
    <body>
        {% if statset and stat_comparison %}
            <p>{{ statset.champ }}</p>
            
            <ul>
            {% for key, value in stat_comparison.items %}
                {# value.avg -> avg val #}
                {# value.local -> local val #}
                {# value.rel_percentage -> rel percentage #}        
                {# value.name -> un-camelcased key #}
                {# value.win_percentage -> win percentage #}
                
                <li>{{ value.name }}: {{ value.local }}</li>
                <p></p>
                
                {% if value.local > value.avg %}
                    <p>Above Average in {{ value.name }}</p>
                {% elif value.local < value.avg %}
                    <p>Below Average in {{ value.name }}</p>
                {% else %}
                    <p>Average in {{ value.name }}</p>
                {% endif %}
                
                <p>You did better than {{ value.rel_percentage }}% of all {{ statset.champ.smart_role_name.lower }} {{ statset.champ.champ_name }} players in {{ statset.champ.league_name }}</p>
                <p>You did better than {{ value.win_percentage }}% of winning {{ statset.champ.smart_role_name.lower }} {{ statset.champ.champ_name }} players in {{ statset.champ.league_name }}</p>
                
            {% endfor %}
            </ul>
            
        {% else %}
            <p>Match not found, or missing information...</p>
        {% endif %}

        <label for="game_time">Game Time</label>
        <input id="game_time" type="range" value="30" min="0" max="{{ match_duration }}" step="10" oninput="outputUpdate(value)"/>
        <output for="game_time" id="time">00:00:30</output>
        <script src="{% static 'champs/poobygg.js' %}"></script>

        {% if build %}
            <div class="build">
                <ul class="time_items">
                {% for component in build %}
                    <li data-birth={{ component.item_birth }} data-death={{ component.item_death }}>
                        <img src="{{ component.item.img }}" title="{{ component.item.name }} ({{ component.item_birth_time }}-{{ component.item_death_time }})" height="50px" width="50px"></img>
                    </li>
                {% endfor %}
                    <li></li>
                </ul>
            
                <ul class="final_items">
                {% for component in build %}
                    {% if not component.item_death %}
                        <li class="final_item_slot">
                            <img src="{{ component.item.img }}" title="{{ component.item.name }} ({{ component.item_birth_time }}-{{ component.item_death_time }})" height="50px" width="50px"></img>
                        </li>
                    {% endif %}
                {% endfor %}
                </ul>
            </div>
        {% endif %}
    </body>
</html>